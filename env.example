# FEDRESURS RADAR Configuration
# Copy to .env and fill in your values

# ============================================================================
# EFRSB API Configuration
# ============================================================================

# Environment: DEMO or PROD
EFRSB_ENV=DEMO

# Demo credentials (public)
EFRSB_DEMO_LOGIN=demowebuser
EFRSB_DEMO_PASSWORD=Ax!761BN
EFRSB_DEMO_BASE_URL=https://bank-publications-demo.fedresurs.ru

# Production credentials (получаются после заключения договора с АО "Интерфакс")
# Стоимость: ~60,600 руб/квартал
EFRSB_PROD_LOGIN=your_production_login
EFRSB_PROD_PASSWORD=your_production_password
EFRSB_PROD_BASE_URL=https://bank-publications-prod.fedresurs.ru

# ============================================================================
# Rate Limiting (CRITICAL!)
# ============================================================================

# Официальный лимит: 8 req/sec
# Безопасное значение с учётом джиттера: 6-7 req/sec
MAX_REQS_PER_SECOND=6

# Размер пачки при пагинации (макс 500)
API_PAGE_LIMIT=500

# Максимальное окно дат (API ограничение: 31 день)
MAX_DATE_WINDOW_DAYS=31

# ============================================================================
# Database Configuration
# ============================================================================

DB_HOST=localhost
DB_PORT=5432
DB_NAME=fedresurs_radar
DB_USER=fedresurs_user
DB_PASSWORD=fedresurs_secure_pass_2024

# Database connection pool
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ============================================================================
# Redis Configuration (для кэширования токенов)
# ============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ============================================================================
# Semantic Core Filters (МКД и Земля)
# ============================================================================

# Коды классификатора (через запятую)
CLASSIFIER_CODES_LAND=0108001,0402006,0402003,0402004
CLASSIFIER_CODES_BUILDINGS=0101014,0101016,0103,0101009

# Ключевые слова (include)
KEYWORDS_INCLUDE=многоквартирн,жилая застройка,Ж-1,Ж-2,высотная,комплексное освоение,РНС,ГПЗУ,ТУ,незавершенное строительство,ЖК

# Стоп-слова (exclude)
KEYWORDS_EXCLUDE=СНТ,ЛПХ,сельскохозяйств,садоводство,гараж,ДНП,огородничество

# ============================================================================
# Processing Configuration
# ============================================================================

# Интервал опроса API (минуты)
POLL_INTERVAL_MINUTES=15

# Количество воркеров для обработки
WORKER_COUNT=4

# Включить OCR для PDF-сканов
ENABLE_OCR=false

# ============================================================================
# Enrichment Services (Due Diligence)
# ============================================================================

# Rosreestr API (если есть доступ)
ROSREESTR_API_KEY=

# NALOG.RU scraping (для проверки bo.nalog.ru)
ENABLE_NALOG_CHECK=false

# Kad.arbitr.ru check
ENABLE_COURT_CHECK=false

# Social radar (Telegram, VK)
ENABLE_SOCIAL_MONITORING=false
TELEGRAM_BOT_TOKEN=
VK_API_KEY=

# ============================================================================
# Notifications
# ============================================================================

# Telegram alerts
TELEGRAM_CHAT_ID=
TELEGRAM_ALERT_THRESHOLD=50  # Минимальный InvestScore для отправки

# Email alerts
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
ALERT_EMAIL_TO=

# ============================================================================
# Logging
# ============================================================================

LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
LOG_FILE=logs/fedresurs_radar.log

# ============================================================================
# Advanced Settings
# ============================================================================

# Retry settings
MAX_RETRIES=3
RETRY_BACKOFF_FACTOR=2  # 2s, 4s, 8s...

# Timeout settings (seconds)
API_TIMEOUT=30
DB_TIMEOUT=10

# Холодный старт: дней назад при пустой БД
COLD_START_DAYS_AGO=30

# Timezone
TZ=Europe/Moscow
